let once=true
function drawmap(st){
    blockreset()
    ctx.fillStyle="#555555"
    ctx.fillRect(0,0,stage["S"+area[0]]["A"+area[1]][1][0].length*16,stage["S"+area[0]]["A"+area[1]][1].length*16)
    for(let k=0;k<3;k++){
        for(let i=0;i<st[k].length;i++){
            for(let j=0;j<st[k][i].length;j+=4){
                if(k==0){
                    switch(st[k][i][j]){
                        case"1":drawimg(img.map.sky,j*16,i*16);break;
                    }
                }else if(k==1){
                    switch(st[k][i][j]){
                        case"A":blocks.areamove.push([j*16/4,i*16]);break;
                        case"E":if(once){enemy.d.push(3);enemy.xy.push([j*16/4,i*16,0,false]);enemy.t.push(false);enemy.type.push(st[k][i][j+1]);enemy.p.push([st[k][i][j+2],st[k][i][j+3]])};break;
                        case"1":drawimg(img.map.grass,j*16/4,i*16);blocks.block.push([j*16/4,i*16,st[k][i][j+1],st[k][i][j+2],st[k][i][j+3]]);break;
                        case"2":drawimg(img.map.dirt,j*16/4,i*16);blocks.block.push([j*16/4,i*16,st[k][i][j+1],st[k][i][j+2],st[k][i][j+3]]);break;
                        case"3":drawimg(img.map.brick,j*16/4,i*16);blocks.block.push([j*16/4,i*16,st[k][i][j+1],st[k][i][j+2],st[k][i][j+3]]);break;
                        case"4":drawimg(img.map.bridge,j*16/4,i*16);blocks.bridge.push([j*16/4,i*16,st[k][i][j+1],st[k][i][j+2],st[k][i][j+3]]);break;
                        case"5":drawimg(img.map.needle,j*16/4,i*16);blocks.needle.push([j*16/4,i*16,st[k][i][j+1],st[k][i][j+2],st[k][i][j+3]]);break;
                        case"6":drawimg(img.map.spike,j*16/4,i*16,st[k][i][j+1]==0,st[k][i][j+2]);blocks.spike.push([j*16/4,i*16,st[k][i][j+1],st[k][i][j+2],st[k][i][j+3]]);break;
                        case"7":if(once){obj.d.push(false);obj.xy.push([j*16/4,i*16,0,false]);obj.t.push(false);obj.type.push("lift");obj.p.push([st[k][i][j+1],st[k][i][j+2],st[k][i][j+3]])};break;
                        case"8":blocks.liftturn.push([j*16/4,i*16,st[k][i][j+1],st[k][i][j+2],st[k][i][j+3]]);break;
                    }
                    drawplayer()
                }else if(k==2){
                    switch(st[k][i][j]){
                        case"1":drawimg(img.map.dirt,j*16,i*16);break;
                    }
                }
            }
        }
    }
    if(once){once=false}
}


let stage = {
    S1:{
        A1:[
            [
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
            ],
            [
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "8420000000000000000084300000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000040004000400000000000000000000000",
                "0000000000007110000084000000000040000000000000000000000000000000",
                "000081101000000000000000E0100000100000000000E2f00000600061000000",
                "0000400010001000100011001000100010000000000011000000601061100000A000",
                "0000400000000000100022000000000000000000000022000000602061200000A000",
                "0000400010001000E1f42200E010E133E2100000000022000000603061300000A000",
                "10001000200020002000220010001000100010001000220010001000100010001000",
            ],
            [
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
                "0000000000000000000000000000000000000000000000000000000000000000",
            ],
            [0,0,0,0]
        ],
        A2:[
            [
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            ],
            [
                "000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000",
                "000060000000610000000000000000000000000000004000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000",
                "000060300000613000000000000000000000000000004000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000",
                "000060200000612000000000400040000000000000004000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000004000400040004000000000000000000000000000000000000000000000000000",
                "000060100000611000000000000000000000000000004000000000000000000000000000000000000000000000000000",
                "0000000000000000000000001000000000000000000040000000000000000000E1710000000000000000000000001000",
                "100010000000000000001000100010001000100010001000100010001000100010001000100010001000100010001000",
                "000000004000400040000000000000000000000000001000000000001000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000001000000000001000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000001000000000001000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000001000400000001000100000000000000000000000000000000000",
            ],
            [
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            ],
            [0,0,0,0]
        ],
    }
}